{% extends 'base.html.twig' %}

{% block title %}Profile - My Micro Blog{% endblock %}

{% block body %}
    <div class="container border-start border-end p-0 rounded-top">
        <div id="profile_main">
            <div id="profile_banner" class="bg-primary w-100 rounded-top" style="height: 12rem">
                {% if user.banner %}
                    <img src="#" alt="{{ user.username }} banner"/>
                {% endif %}
            </div>
            <div id="profile_info" class="container px-4">
                <div class="row" style="width: 9rem">
                <img src="{{ user.profilePicture
                    ? asset(user.profilePicture)
                    : asset('/build/images/pfp/defaultpfp.png') }}" class="rounded-circle"
                     style="position: relative; bottom: 4rem" alt="{{ user.username }} profile picture"/>
                </div>
                <div class="row">
                    <h2 class="col">{{ user.displayName }}</h2>
                    {% if app.user == user %}
                        <a href="#" class="btn btn-outline-secondary rounded-pill p-2 col" style="max-width: 8rem">Edit</a>
                    {% else %}
                        {% if user.followers.contains(app.user) %}
                            <a href="{{ path('app_unfollow', {'unfollowed': user}) }}" class="btn btn-danger rounded-pill p-2 col" style="max-width: 8rem">Unfollow</a>
                        {% else %}
                            <a href="{{ path('app_follow', {'followed': user}) }}" class="btn btn-primary rounded-pill p-2 col" style="max-width: 8rem">Follow</a>
                        {% endif %}
                    {% endif %}
                </div>
                <div class="row">
                    <i class="text-secondary">@{{ user.username }}</i>
                </div>
                <p>{{ user.bio }}</p>
            </div>
        </div>
        <hr class="mx-2">
        {% include 'components/_timeline.html.twig' with {'timeline': user.posts, 'reply_form': reply_form} only %}
    </div>
{% endblock %}
